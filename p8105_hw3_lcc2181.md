p8105\_hw3\_lcc2181
================

Loading packages needed for Homework 3 and adding code to format plots.

``` r
library(tidyverse)
library(p8105.datasets)

knitr::opts_chunk$set(
  fig.width = 6,
  fig.asp = .6,
  out.width = "90%"
)
```

## Problem 1

Loading instacart dataset for Problem 1

``` r
data("instacart")
```

There are 1384617 observations and 15 variables in the Instacart
dataset. Some key variables in the data set include `order_id`,
`product_id`, `order_dow`, `product_name`, and `aisle`. `order_dow`
describes what day of the week the order was placed. `product_name`
describes the name of the product and `aisle` describes the name of the
aisle. For example, the first observation in the dataset contains an
order for Bulgarian Yogurt from the yogurt aisle.

How many aisles are there and which aisles are the most items ordered
from?

*Using the `count` function to count the number of aisle\_id’s in the
instacart data set, and the `distinct` function to remove duplicate
aisle\_ids to ensure all aisle\_id’s being counted are unique. *Using
the `group_by` function to group by aisle\_id *Using the `summarize`
function to summarize the total number of observations by aisle\_id,
assuming each observation in the dataset represents an item ordered.
*Using `arrrange` to order in descending order, so that aisles will be
listed in order most to least items ordered.

``` r
count(distinct(instacart, aisle_id)) 
```

    ## # A tibble: 1 × 1
    ##       n
    ##   <int>
    ## 1   134

``` r
instacart %>% 
  group_by(aisle_id) %>% 
  summarize(number_of_items = n()) %>% 
  arrange(desc(number_of_items))
```

    ## # A tibble: 134 × 2
    ##    aisle_id number_of_items
    ##       <int>           <int>
    ##  1       83          150609
    ##  2       24          150473
    ##  3      123           78493
    ##  4      120           55240
    ##  5       21           41699
    ##  6      115           36617
    ##  7       84           32644
    ##  8      107           31269
    ##  9       91           26240
    ## 10      112           23635
    ## # … with 124 more rows

*There are 134 aisles. *The most items are ordered from aisle 83
(150609) followed by aisle 24 (150473).

Making a plot showing number of items ordered in each aisle. The plot is
limited to aisles with more than 10000 items ordered.

*Using `group_by` to group by aisle\_id *Using `summarize` to count the
total number of observations by aisle\_id, assuming each observation
(row) represents an item ordered *Using `filter` to restrict to aisles
with more than 10,0000 items ordered *Using `ggplot` to create a plot
with aisle\_id on the x-axis and number\_of\_items on the y-axis

``` r
instacart %>% 
  group_by(aisle_id) %>% 
  summarize(number_of_items = n()) %>% 
  filter(number_of_items > 10000) %>% 
  ggplot(aes(x = aisle_id, y = number_of_items)) +
  geom_point()
```

<img src="p8105_hw3_lcc2181_files/figure-gfm/unnamed-chunk-4-1.png" width="90%" />

Making a table showing the three most popular items in each of the
aisles.

*Using `filter` to filter the data set to the three aisles - “baking
ingredients”, “dog food care”, and “packaged vegetables fruits” *Using
`group_by` to group the observations by aisle and product\_name *Using
`summarize` to count the total number of observations by aisle\_id,
assuming each observation (row) represents an item ordered *Using
`filter` to filter to those with a ranking of less than 4 (so, a ranking
of 1, 2, or 3) as determined by using the `min_rank` function with
descending n\_items to ensure that those most number of items are ranked
as highest *Using `select` to ensure that the variables aisle,
product\_name, and n\_items are included in the table *Using `arrange`
to order the table by aisle and most to least number of items in each
aisle \*Using `knitr::kable()` to convert the table into a
reader-friendly format

``` r
instacart %>% 
  filter(
    aisle %in% c("baking ingredients", "dog food care", "packaged vegetables   fruits")
  ) %>%
  group_by(aisle, product_name) %>% 
  summarize(n_items = n()) %>% 
  filter(min_rank(desc(n_items)) < 4) %>% 
  select(aisle, product_name, n_items) %>% 
  arrange(aisle, desc(n_items)) %>% 
  knitr::kable()
```

    ## `summarise()` has grouped output by 'aisle'. You can override using the `.groups` argument.

| aisle              | product\_name                                 | n\_items |
|:-------------------|:----------------------------------------------|---------:|
| baking ingredients | Light Brown Sugar                             |      499 |
| baking ingredients | Pure Baking Soda                              |      387 |
| baking ingredients | Cane Sugar                                    |      336 |
| dog food care      | Snack Sticks Chicken & Rice Recipe Dog Treats |       30 |
| dog food care      | Organix Chicken & Brown Rice Recipe           |       28 |
| dog food care      | Small Dog Biscuits                            |       26 |

Making a table showing mean hour of day at which Pink Lady Apples and
Coffee Ice Cream are ordered each day of week

*Using `filter` to limit the table to the products “Pink Lady Apples”
and “Coffee Ice Cream” *Using `mutate` to convert the order\_dow
variable into day names rather than numbers using the `recode` function,
assuming that Sunday represents day 0. *Using `group_by` to group by
order\_dow and product\_name *Using `summarize` to create a new variable
mean\_hour\_of\_day which takes the mean value of the order hour of day
*Using `pivot_wider` to convert format of table so that order\_dow
becomes columns taking on values from mean\_hour\_of\_day variable
created in the previous step *Using `relocate` to order the table with
product\_name first followed by days of the week in chronological order
\*Using `knitr::kable()` to convert the table into a reader-friendly
format

``` r
instacart %>% 
  filter(product_name %in% c("Pink Lady Apples", "Coffee Ice Cream")) %>% 
  mutate(order_dow = recode(order_dow,
    `0` = "Sunday", `1` = "Monday", `2` = "Tuesday", `3` = "Wednesday", 
    `4` = "Thursday", `5` = "Friday", `6` = "Saturday")) %>% 
  group_by(order_dow, product_name) %>%
  summarize(mean_hour_of_day = mean(order_hour_of_day)) %>% 
  pivot_wider(
    names_from = order_dow,
    values_from = mean_hour_of_day
  ) %>%
  relocate(product_name, Sunday, Monday, Tuesday, Wednesday, Thursday, Friday, Saturday) %>% 
  knitr::kable()
```

| product\_name    |   Sunday |   Monday |  Tuesday | Wednesday | Thursday |   Friday | Saturday |
|:-----------------|---------:|---------:|---------:|----------:|---------:|---------:|---------:|
| Coffee Ice Cream | 13.77419 | 14.31579 | 15.38095 |  15.31818 | 15.21739 | 12.26316 | 13.83333 |
| Pink Lady Apples | 13.44118 | 11.36000 | 11.70213 |  14.25000 | 11.55172 | 12.78431 | 11.93750 |
